<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>比特币是如何做到去中心化的(下) | CODING</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">比特币是如何做到去中心化的(下)</h1><a id="logo" href="/.">CODING</a><p class="description">佛系兔子的潜水小窝</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/history/"><i class="fa fa-history"> 轨迹</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">比特币是如何做到去中心化的(下)</h1><div class="post-meta">2018-02-17 21:39:19<span> | </span><span class="category"><a href="/categories/bitcoin/">bitcoin</a><a href="/categories/bitcoin/比特币/">比特币</a></span></div><div class="post-content"><p>上一部分简单描述了比特币去中心化的底层实现技术之一:P2P点对点网络.</p>
<p>接下的一个关键性和核心的概念是：共识</p>
<p>由此引出的一个问题是: 分布式共识如何达成?</p>
<h2 id="什么是共识"><a href="#什么是共识" class="headerlink" title="什么是共识"></a>什么是共识</h2><p>从人类的历史到生活的方方面面,几乎都是靠共识来维系. 简单的理解,共识就是所有的参与者就某一问题或者观点达成一致.</p>
<p>当所有人都认为一辆宝马值100万的时候,那么它的市场价就真的会是100万,即使它本身的内在价值是70万.</p>
<h2 id="比特币与分布式共识"><a href="#比特币与分布式共识" class="headerlink" title="比特币与分布式共识"></a>比特币与分布式共识</h2><h3 id="分布式共识协议的概念"><a href="#分布式共识协议的概念" class="headerlink" title="分布式共识协议的概念"></a>分布式共识协议的概念</h3><p>在一个具有n个节点的系统当中,每一个节点都有一个输入值,其中一些节点具有故障,甚至是恶意节点.<br>那么一个分布式共识协议应该具有以下两个属性:</p>
<ul>
<li>输入值的终止必须由所有的诚实节点来确定</li>
<li>这个输入值必须由诚实节点来生成</li>
</ul>
<h3 id="比特币节点需要达成怎么样的共识"><a href="#比特币节点需要达成怎么样的共识" class="headerlink" title="比特币节点需要达成怎么样的共识"></a>比特币节点需要达成怎么样的共识</h3><p>我们知道比特币是一个点对点的系统,系统中有各种各样的用户在想网络中传播交易信息,所有的节点必须对交易的真实性和发生的先后顺序达成共识,以此系统将形成一个唯一的全球交易总账.</p>
<p>在任何时刻,所有节点都包含一系列区块的总账本,每个区块都包含了已经被所有节点达成共识的交易清单.</p>
<p>同时,每个节点都还有一堆没有打包进区块的交易, 就是网络节点已经被通知,交易已经发生,但还还未被写进区块的交易.即网络上所有节点还未对这些交易达成共识.每个节点所包含的交易是有所差异的.</p>
<p>点对点网络是不完美的,有的节点可能听到了交易,有的节点由于种种原因还没有收到通知.</p>
<p>所以问题就是: 比特币网络中的所有节点,如果对一个区块达成共识?</p>
<h3 id="分布式共识难以达成的原因"><a href="#分布式共识难以达成的原因" class="headerlink" title="分布式共识难以达成的原因"></a>分布式共识难以达成的原因</h3><p>从技术上来讲,共识难以达成的原因有:</p>
<ol>
<li>有一些节点会死机或者本身就是恶意节点;</li>
<li>比特币的点对点网络是不完美的,并非所有的节点都是两两相连,互联网链接的不良可能会导致网络问题,要执行一个所有节点参与的共识协议不现实</li>
<li>交易消息本身就是分布在整个互联网上的,消息传递会有严重的延迟</li>
</ol>
<h3 id="分布式共识的经典问题与不可能性结论"><a href="#分布式共识的经典问题与不可能性结论" class="headerlink" title="分布式共识的经典问题与不可能性结论"></a>分布式共识的经典问题与不可能性结论</h3><ul>
<li>拜占庭将军问题: 拜占庭将军问题的结论表明,当叛徒的数量超过1/3时,这个难题将无法克服,忠臣们拯救拜占庭的计划终将会被叛徒们破坏.</li>
<li>不可能性结论: 在一定的条件下(包括节点行为具有确定性特征),甚至在一个有缺陷的过程中,达成共识都是不可能的.</li>
</ul>
<h2 id="比特币共识协议"><a href="#比特币共识协议" class="headerlink" title="比特币共识协议"></a>比特币共识协议</h2><h3 id="比特币对分布式共识做出的创新"><a href="#比特币对分布式共识做出的创新" class="headerlink" title="比特币对分布式共识做出的创新"></a>比特币对分布式共识做出的创新</h3><p>相对于传统的共识,比特币引入了两个创新性的举措,使得在一定条件下分布式共识达成成为可能:</p>
<ol>
<li>比特币引进了奖励的概念,这对分布式共识来说是一个全新的概念,也只有在比特币里才有,因为比特币是货币,所以节点当然会为了奖励而变得诚实起来.</li>
<li>比特币体系包含了随机性这个概念,比特币的共识算法很大程度上依赖于随机性.</li>
</ol>
<p>比特币的共识算法不纠结于规定共识的起点和终点.相反,共识是通过一段较长的时间达成的.在实际系统中,达成共识大概需要一个小时左右,但即使在一个小时之后, 节点们也无法确定哪一个区块最终会进入总账本.</p>
<p>但是随着时间的流逝,我们对某一个区块的认识与最终总体共识相吻合的概率越来越大,观点出现分歧的概率按指数级下降.</p>
<p>通俗的来讲:随着时间的流逝,真的终究是真的,假的就是假的,所有人都看的清楚. 比特币在以上方面的不同,让它能够逾越历史的鸿沟达成分布式共识这一难题</p>
<blockquote>
<p>比特币从技术手段和奖励机制两个方面完成了去中心化这一革命性的特性.</p>
</blockquote>
<h3 id="使用区块链达成没有身份的共识"><a href="#使用区块链达成没有身份的共识" class="headerlink" title="使用区块链达成没有身份的共识"></a>使用区块链达成没有身份的共识</h3><p>比特币系统的一个特点是所有的节点没有稳定,长期的身份,这是比特币想要实现的功能之一. 任何节点,在任意时刻,都可以自由的加入或者离开比特币网络.</p>
<p>缺少真实身份会给比特币的共识协议带来很多难点.</p>
<p>基于隐性共识的比特币共识算法:</p>
<ol>
<li>新的交易广播到所有节点上</li>
<li>每个节点都将新的交易放进一个区块</li>
<li>在每个回合,一个随机的节点可以广播它的区块</li>
<li>其他节点可以选择接受这个区块,前提是如果交易都是合法的(有真实的签名)</li>
<li>节点们可以把上述区块的哈希值放进自己的区块里,以此来表示它们对那个新区块的认可</li>
</ol>
<p>一笔交易得到的“确认”越多,它被纳入长期共识连的概率越大,诚实节点总是选择延展最长的共识链</p>
<p>总结一下：</p>
<ul>
<li>防止不正当交易完全是用密码学的方法.但这些方法被共识所加强,意思是一个节点如果想放入一个密码学上不正当的交易,这个交易不会被纳入长期共识链的唯一原因是大多数节点是诚实的,不会把不正当交易放入区块</li>
<li>防止双重支付完全依赖于共识,密码学不起任何作用.从密码学角度来看,两笔交易都是正当的,但是共识决定了哪个被放入长期共识链</li>
</ul>
<h3 id="奖励机制"><a href="#奖励机制" class="headerlink" title="奖励机制"></a>奖励机制</h3><p>前面讲了比特币的共识算法,并在直觉上相信它是安全的.我们从奖励机制上继续优化上述方案.</p>
<p>在我们随机选取的节点时,有50%的概率选中诚实节点,这或许是有问题的.对于没有身份的节点来说,惩罚不诚实的奖励更加不现实.</p>
<p>所以现在的问题是: 如何奖励表现诚实的节点?</p>
<p>比特币包含两种奖励：</p>
<ol>
<li>区块奖励</li>
<li>交易费</li>
</ol>
<p>根本比特币的规则,创建区块的节点可以在区块中加入一笔特别的交易,这笔交易是个造币的交易,节点可以指定这笔交易的接收地址,这笔交易就视为对节点在共识链上创建新区块的报酬(奖励)</p>
<blockquote>
<p>那么问题来了：为什么区块奖励可以做到鼓励诚实行为?</p>
</blockquote>
<p>根据前面的讨论,不论随机选取的节点是否诚实,该节点都可以获得区块奖励。再仔细想想,其实不然,只有当该区块被纳入长期共识链时该笔奖励才会生效。因为造币交易和其他交易一样,只有最终被纳入共识链才会被其他节点接受。</p>
<p>这是比特币奖励制度的一个关键概念,这个设计激励节点想法设法让其他节点延展他们自己的区块,因此如果网络中大部分节点遵循去延展最长支链的规则,那这样的设计将激励所有的节点遵循这个规则</p>
<h3 id="工作量证明"><a href="#工作量证明" class="headerlink" title="工作量证明"></a>工作量证明</h3><blockquote>
<p>工作量证明的核心理念是: 把随机选取节点改为根据节点占有某种资源的比例来选取节点,并且我们希望这种资源是没有人可以垄断的</p>
</blockquote>
<p>比特币是用哈希函数解密来证明工作量的,节点用它们的计算能力来相互竞争,导致的结果是计算能力的比例决定了节点被自动选中的概率.</p>
<p>工作量还有一种理解方式：把制造新身份的难度适度提高了,这就好像是对制造新身份,继而发起女巫攻击收税一样</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过上面的讨论知道,比特币系统使用技术手段和独创的奖励机制,创造性的解决了特定条件下分布式共识难以达成的问题。</p>
<p>继而,通过工作量证明机制,进一步提高了系统的安全性以及稳定性。</p>
<p>比特币将去中心化的P2P网络 + 分布式共识(隐性共识) + 奖励机制 + 工作量证明等结合在一起, 实现了这一精密系统的去中心化</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/02/19/比特币的区块奖励规则/">比特币的区块奖励规则</a><a class="next" href="/2018/02/16/python用django实现文件上传代码示例/">python 用django实现文件上传代码示例</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bitcoin/">bitcoin</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bitcoin/比特币/">比特币</a><span class="category-list-count">8</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/blockchain/">blockchain</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/blockchain/区块链/">区块链</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/django/">django</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-mac/">linux/mac</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作与经验/">工作与经验</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日记/">日记</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活与思考/">生活与思考</a><span class="category-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/生活与思考/" style="font-size: 15px;">生活与思考</a> <a href="/tags/工作与经验/" style="font-size: 15px;">工作与经验</a> <a href="/tags/领悟/" style="font-size: 15px;">领悟</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/02/python字符串按自定位数添加分隔符/">python 字符串按自定位数添加分隔符</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/01/linux生成项目或者文件目录树结构/">linux 生成项目或者文件目录树结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/31/linux用find查找和删除指定目录下的指定文件/">linux 用find查找和删除指定目录下的指定文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/27/2018-07-27/">2018-07-27</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/2018-07-25/">2018-07-25</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/24/python去掉list中重复的dict/">python 去掉list中重复的dict</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/18/python的web开发套路/">python的web开发套路</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/14/面试-我们到底在面什么/">面试:我们到底需要什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/10/钱满仓事件处理感想/">钱满仓爆雷事件引发的头脑风暴</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/新的CEO带来了哪些变化/">新的CEO带来了哪些变化</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.miaosuanlicai.com/" title="妙算理财" target="_blank">妙算理财</a><ul></ul><a href="http://www.fanlitou.com/" title="北京返利投科技有限公司" target="_blank">北京返利投科技有限公司</a><ul></ul><a href="https://www.huobi.pro/zh-cn/" title="火币网" target="_blank">火币网</a><ul></ul><a href="https://www.okex.com/" title="OKEX虚拟货币交易所" target="_blank">OKEX虚拟货币交易所</a><ul></ul><a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017-2018 <a href="/." rel="nofollow">CODING.</a>    Powered by<a rel="nofollow" target="_blank" href="https://github.com/bunnyzhaov"> zhao</a>    Supported by <a rel="nofollow" target="_blank" href="https://hexo.io"> hexo.</a><!-- a(rel='nofollow', target='_blank', href='https://github.com/tufu9441/maupassant-hexo')  Theme--><!-- |  by--><!-- a(rel='nofollow', target='_blank', href='https://github.com/pagecho')  cho.--><a rel="nofollow" target="_blank" href="https://github.com/tufu9441"> tufu9441.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>