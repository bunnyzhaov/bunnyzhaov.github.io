<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>比特币是如何做到去中心化的(上) | CODING</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">比特币是如何做到去中心化的(上)</h1><a id="logo" href="/.">CODING</a><p class="description">佛系兔子的潜水小窝</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/history/"><i class="fa fa-history"> 轨迹</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">比特币是如何做到去中心化的(上)</h1><div class="post-meta">2018-02-11 15:39:05<span> | </span><span class="category"><a href="/categories/bitcoin/">bitcoin</a><a href="/categories/bitcoin/比特币/">比特币</a></span></div><div class="post-content"><h2 id="中心化与去中心化的关系"><a href="#中心化与去中心化的关系" class="headerlink" title="中心化与去中心化的关系"></a>中心化与去中心化的关系</h2><p>去中心化是一个非常重要的概念，但是需要注意，去中心化并不是比特币独有的特性。</p>
<p>从历史发展的角度来讲，先有去中心化分享网络，再有比特币，所以不是因为有了比特币才有去中心化的概念，不过是比特币让去中心化这个词成为热门词汇。</p>
<p>常见的去中心化系统:</p>
<ul>
<li>互联网系统</li>
<li>简单邮件传输协议SMTP</li>
</ul>
<p>中心化与去中心化并非水火不容，其实没有任何一个系统是完全中心化或者完全去中心化的。</p>
<p>比如电子邮件系统是一个去中心化的系统，任何人只要愿意都可以实现用邮件与人沟通，但是现实却是大多数人使用者中心化的邮件服务，比如谷歌邮箱，QQ邮箱。</p>
<p>比特币系统是去中心化的系统，但是比特币交易所，钱包软件等却是中心化的。</p>
<h2 id="P2P（peer-to-peer）网络技术发展"><a href="#P2P（peer-to-peer）网络技术发展" class="headerlink" title="P2P（peer-to-peer）网络技术发展"></a>P2P（peer-to-peer）网络技术发展</h2><p>互联网发展初期，互联网是很简单的，而且接入速度非常慢，网上的资源也并没有像现在这么丰富，服务器也并不这么强悍，一台服务器承载几百人的访问也是绰绰有余。</p>
<p>此时的网站架构就可以理解为传统的C/S模式，由中心化的网站运营者或服务提供商假设服务器和带宽，为所有终端用户提供服务。</p>
<p><img src="/images/p2p_cs.jpg" alt=""></p>
<p>但是随着互联网的普及，互联网用户呈现爆炸式的增长，网站和数据服务商面临的压力越来越大，尽管网站和数据服务商想尽一切办法扩充服务器，增加网络带宽，但是仍然无法满足呈指数增长的互联网用户量。</p>
<p>这时有人提出一个概念：“网络就是计算机”，简单的解释，就是每一台接入网络的计算机的键盘都是这个计算机的输入设备，每一台接入网络的计算机的显示器都是这台计算机的输出设备，每一台接入网络的计算机的硬盘都是这个计算机的存储设备。整个互联网就是一台巨型计算机。</p>
<h3 id="Napster"><a href="#Napster" class="headerlink" title="Napster"></a>Napster</h3><p>在这个概念的引导下，1999年，美国波士顿东北大学18岁的学生肖恩•范宁为解决自己和舍友下载音乐费劲的问题，写一个叫Napster的软件，其基本原理是：当你在电脑上启动Napster软件时，Napster会把你的电脑变成一个可提供上传下载服务的微型服务器，你既可以下载文件，同时又可以为其他使用Napster软件的用户提供下载服务，你可以选择为Napster用户提供哪些文件的下载，Napster会将你同意提供的文件列表上传到Napster的中央索引服务器。这个中央索引服务器只有文件的列表，不提供任何文件的下载，所有文件的下载都是由Napster用户提供。</p>
<p><img src="/images/p2p_napster.jpg" alt=""></p>
<p>也就是说我的电脑既可以从清华大学林可可的电脑上下载一首&lt;简单&gt;，也可以从上海交大王小北的电脑上下载一首&lt;成都&gt;，同时我也为四川大学李思思提供&lt;最炫名族风&gt;的下载。</p>
<h3 id="BitTorrent"><a href="#BitTorrent" class="headerlink" title="BitTorrent"></a>BitTorrent</h3><p>由于用户自由分发涉及到版权等诸多问题，Napster被迫关门，随后纽约州立大学布法罗分校的辍学生布拉姆·科恩使用Python语言编写了首款BitTorrent客户端，其主要依靠的是BitTorrent内容分发协议，这比前面的Napster更为细致。</p>
<p>BitTorrent协议允许用户把一个文件分解成许许多多的小块，并且为每一块生成指定的识别码。每个用户可以分别从其他用户哪里下载不同的小块，最后按照识别码拼接成一个完整的文件。</p>
<p>举个例子，一辆有10节车厢的火车，每节车厢也可以坐100人，即火车的总容量为1000人(整个文件大小)，每个乘客都有自己的姓名和座位号，分别从不同的车厢的不同入口，凭票上车，直到整个火车坐满为止（下载完成）。到站时，不同的乘客从不同的车厢的不同出口下车，回到不同的街道的不同的编号的家中（分布式上传）。站在我的角度，从其他地方来的即是下载，从我这里走的即是上传。</p>
<p>再举个例子，一个文件被分为ABCDEFGH共8个字母，有8个人同时下载，但是并不是每个人都是从A开始下载，有人从A开始，有人从D开始，有人从E开始。</p>
<ul>
<li>我有A之后，其他用户为我提供B~H的下载，我为其他用户提供A的下载</li>
<li>我有AD之后，其他用户为我提供BCEFGH的下载，我为其他用户提供AD的下载</li>
<li>依次类推，知道所有用户都完整的下载到8个字母</li>
<li>此时若有第9个用户来下载，可以分别从前8个用户每个人那里下载1个字母，速度会非常快</li>
</ul>
<p>此时分享网络变产生了，每一个BitTorrent用户都是一个微型的服务器节点，自己下载的同时也是为其他用户提供下载的服务器，真正的“我为人人，人人为我”</p>
<p><img src="/images/p2p_bittorrent.jpg" alt=""></p>
<p>发展到最后BitTorrent已经不需要索引服务器，只要有完整文件的识别码，就可以加入分享网络。这就是传说中的BT种子，只要把种子发给其他用户，用户就可以根据种子从初始发布者那里下载文件，然后又成为其他用户下载的微型服务器，就像一颗种子逐渐成长为大树，每个用户都是树上的枝叶。</p>
<p>每个BitTorrent自己即是服务器又是客户端，想分享什么文件，只要按照规则给文件制作统一的标识码，再把标识码发给其他的BitTorrent用户，就像种下一粒种子，它自己就会成长为大树。</p>
<p>这一下子解决了过去从同一个服务器下载文件的用户越多，带宽越拥挤，下载越慢的问题，反而形成了同一个文件，下载的用户越多，微型服务器越多，下载速度变的越快的景象。（过去是一堆人从一个服务器下载，现在是一堆人为一个用户提供下载，速度简直火箭提升）</p>
<h3 id="P2P技术的其他应用"><a href="#P2P技术的其他应用" class="headerlink" title="P2P技术的其他应用"></a>P2P技术的其他应用</h3><p>在P2P技术的推动下，互联网再一次步入黄金发展期，过去由于带宽费用无法提供的视频流媒体播放，得益于P2P技术可以实现。一大批如PPLive，优酷土豆，爱奇艺，快播等等出现。</p>
<p>视频分享网站为了获得商业利益，又不给自己惹上官司（参考Napster），一般都会采用会员制，也就是说你必须注册会员才能上传视频。</p>
<p>当你上传视频的时候，这里的上传是真正的上传到了视频网站的服务器上（并不是通过P2P技术进行分享），然后由管理者进行审核，通过审核后才会发布到分享网站上，并且会注明视频上传者（也就是资源责任人，出了问题就找你）。</p>
<p>然后只有在打开网页的时候视频才会播放，刚开始播放的时候还是直接使用传统的从服务器下载播放，这个时候基于【文件分块标识】的技术开始起作用，即使文件还没有全部下载完成就可以进行播放（这个还没有下载完成就可以播放的文件称之为缓存文件），当播放到一定程度时（也就是缓存文件达到一定大小时），P2P技术开始发挥作用，把已经下载完成的缓存块上传，提供给其他用户下载。这就是我们看到的在在线视频网站打开视频播放时，刚开始会提示【正在缓冲】一步一卡，多看一会儿就不卡了，这个时候就是进入了P2P技术起作用的阶段，你周围缓冲多的用户开始为你提供下载，你同样为其他用户提供下载，达到一定的用户数量，就出现观看视频的用户越多，下载越快，视频越流畅，越流畅看的人就越多，看的人越多就越流畅，这样一个良性循环。</p>
<p>但是还是有很多用户忍受不了刚打开视频的时候的缓冲，这刚打开就卡半天的情况确实让很多用户难以接受。于是缓存服务器技术出现了，视频分享网站会在用户量较少的区域部署较大带宽的缓存服务器，并24小时开机，其中缓存当前播放量最大的热门视频。</p>
<p>于是，越来越多的用户喜欢来这个视频网站看视频，看得人越多速度就越快，视频就越流畅，越流畅看得人就越多，看的人越多速度就越快，从而形成良性循环。</p>
<p>渐渐的，视频分享网站发现仅在单个网页端使用P2P技术，还是远远达不到高清视频的播放速度，如果在提高，那么带宽和缓存服务器的成本又会成倍增加。那怎么办呢？还得回过头来开发P2P客户端。</p>
<p>然后诸如pplive，暴风影音，爱奇艺等等都开发出了自己的客户端，这些客户端其实就是P2P客户端，它会将你看过的视频缓存到本地计算上，在你使用客户端看视频的同时，会将你的缓存上传供其他用户下载，不仅仅是上传当前正在播放的视频，也包括之前观看过的视频缓存文件。</p>
<p>在你下载安装了某P2P客户端软件后，可以从进程列表里看到除了视频软件本身，还会有一个P2P任务进程，在你重启的时候仍然会启动，也就是说只要你的电脑开机，该P2P进程就会工作，为其他看视频的用户提供下载服务。</p>
<p>这样就很清楚了，类似于BitTorrent，所有的视频客户端构成了一个分享网络，在你使用客户端观看视频的时候就成为一个微型的服务器，观看的人越多，微型服务器就越多，下载速度就越快，播放就越流畅。</p>
<p>刚开始各家P2P视频客户端处于竞争态势，彼此不兼容，甚至如果用户同时安装了2家客户端就会变得2家都很卡的情况，但是随后视频网站开始可以识别其他家的缓存文件，彼此也为对方提供下载服务，大家都很满意，一个互利共赢的局面就此形成。</p>
<h2 id="经典案例：快播案（技术本身并不可耻）"><a href="#经典案例：快播案（技术本身并不可耻）" class="headerlink" title="经典案例：快播案（技术本身并不可耻）"></a>经典案例：快播案（技术本身并不可耻）</h2><p>讲到这里，快播其实就很明了了。</p>
<ul>
<li>首先，它用的就是P2P分享传输技术。</li>
<li>其次，它没有朝着视频分享网站的方向发展，它本身不提供不制作视频，而是提供了视频分享网络，就是一个视频分享的工具。</li>
</ul>
<p>再仔细讲，快播其实更接近于BitTorrent，甚至可以直接打开BitTorrent的BT种子文件进行下载。也就是说任何一个快播客户端用户都可以直接分享一个种子文件，然后由其他快播用户下载，然后已经下载的用户又为其他用户提供下载。</p>
<p>与BitTorrent不同的是，快播软件在提供分享传输的同时，还可以播放视频文件，而且可以边播放边上传视频文件。</p>
<p>但是谁分享了什么，谁播放了什么，快播自己是完全不知道的，在法庭上快播也一再强调这一点。平心而论，快播自己确实是不知道的，因为最初没有搞会员制，只要使用快播软件就可以进行分享和上传。只要下载一个快播软件，就可以成为一个微型服务器，在自己看视频的同时为他人提供下载。</p>
<p>于是，严重的问题出现了，快播失控了。</p>
<p>许多盗版和色情视频站长发现这个了快播这个神器，都拿来分享自己网站上的视频，并且迅速走红，快播这一神器的用户量以惊人的速度增长。</p>
<p>2008年底，快播的单日活跃用户量就超过了1500万，后面通过法庭和各种统计，快播的用户量在4~5亿，且不说这个数字里面有多少水分，但就一款软件来说，用户量破亿都已经是天文数字了。</p>
<p>快播当时员工总数不到300人，如何管理这上亿的用户，已经是一个让人心慌头疼的问题。再加上盗版，淫秽色情的标签，被各种举报（用户举报，竞争对手举报）。</p>
<p>既然收到大量举报，并且网警也介入，快播这时发现自己的快播P2P分享播放系统处于失控状态，然后快播试图转型，开启会员审核制，与网警建立110系统，更新软件版本等等一些列措施，试图拖延发展速度，控制海量的使用用户。</p>
<p>但为时已晚，用户并不买账，色情和盗版网站站长，用户里不乏大量的技术人员，开发人员，他们修改软件跳过审核指令，继续使用可分享的客户端。</p>
<p>但是，对于一个破亿用户使用的P2P软件来说，每一台电脑都是微型服务器，每个用户同时既是客户端，又是服务器，既是上传者又是下载者，这个巨大到爆炸的分享网络，想要一朝一夕改变现在的状况，除了关门恐怕没有任何办法。</p>
<p>快播也很无奈，一边是上亿的失控用户，一边是网警的监督，同行的举报。快播试图坚持下来，想要重新恢复对这个庞大网络的控制，但是根本没人知道要花多少时间，多少精力。所以有人等不及了，快播必须关门。</p>
<h2 id="总而言之"><a href="#总而言之" class="headerlink" title="总而言之"></a>总而言之</h2><p>P2P技术以其独特的技术优势，解决了互联网发展的诸多问题，未来也可以解决很多中心化系统遇到的瓶颈问题。</p>
<p>但是值得注意的是：失控的去中心网络也将带来巨大的问题，甚至灾难。</p>
<p>P2P技术也是比特币的底层技术之一, 比特币是使用P2P技术构建成的去中心化网络，添加了包括共识机制等等其他机制来确保网络高效稳定的运转。</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/02/16/python用django实现文件上传代码示例/">python 用django实现文件上传代码示例</a><a class="next" href="/2018/02/04/比特币BTC在区块链行业的作用/">比特币BTC在区块链行业的作用</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bitcoin/">bitcoin</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bitcoin/比特币/">比特币</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/blockchain/">blockchain</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/blockchain/区块链/">区块链</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/django/">django</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux-mac/">linux/mac</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作与经验/">工作与经验</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日记/">日记</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活与思考/">生活与思考</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/生活与思考/" style="font-size: 15px;">生活与思考</a> <a href="/tags/领悟/" style="font-size: 15px;">领悟</a> <a href="/tags/工作与经验/" style="font-size: 15px;">工作与经验</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/08/02/python字符串按自定位数添加分隔符/">python 字符串按自定位数添加分隔符</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/01/linux生成项目或者文件目录树结构/">linux 生成项目或者文件目录树结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/31/linux用find查找和删除指定目录下的指定文件/">linux 用find查找和删除指定目录下的指定文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/27/2018-07-27/">2018-07-27</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/25/2018-07-25/">2018-07-25</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/24/python去掉list中重复的dict/">python 去掉list中重复的dict</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/18/python的web开发套路/">python的web开发套路</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/10/钱满仓事件处理感想/">钱满仓爆雷事件引发的头脑风暴</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/04/面试-我们到底在面什么/">面试:我们到底需要什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/19/django框架优化迁移数据库慢的问题/">django 框架优化迁移数据库慢的问题</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.miaosuanlicai.com/" title="妙算理财" target="_blank">妙算理财</a><ul></ul><a href="http://www.fanlitou.com/" title="北京返利投科技有限公司" target="_blank">北京返利投科技有限公司</a><ul></ul><a href="https://www.huobi.pro/zh-cn/" title="火币网" target="_blank">火币网</a><ul></ul><a href="https://www.okex.com/" title="OKEX虚拟货币交易所" target="_blank">OKEX虚拟货币交易所</a><ul></ul><a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017-2018 <a href="/." rel="nofollow">CODING.</a>    Powered by<a rel="nofollow" target="_blank" href="https://github.com/bunnyzhaov"> zhao</a>    Supported by <a rel="nofollow" target="_blank" href="https://hexo.io"> hexo.</a><!-- a(rel='nofollow', target='_blank', href='https://github.com/tufu9441/maupassant-hexo')  Theme--><!-- |  by--><!-- a(rel='nofollow', target='_blank', href='https://github.com/pagecho')  cho.--><a rel="nofollow" target="_blank" href="https://github.com/tufu9441"> tufu9441.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>